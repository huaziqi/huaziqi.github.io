<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>ziqi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="ziqi">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="ziqi">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="ziqi" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.3.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">ziqi</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-远足——从黑天到天黑" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/13/%E8%BF%9C%E8%B6%B3%E2%80%94%E2%80%94%E4%BB%8E%E9%BB%91%E5%A4%A9%E5%88%B0%E5%A4%A9%E9%BB%91/" class="article-date">
  <time class="dt-published" datetime="2022-11-13T01:53:37.000Z" itemprop="datePublished">2022-11-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%87%AA%E8%AE%AB%E6%BC%AB%E8%AE%B0/">自讫漫记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/11/13/%E8%BF%9C%E8%B6%B3%E2%80%94%E2%80%94%E4%BB%8E%E9%BB%91%E5%A4%A9%E5%88%B0%E5%A4%A9%E9%BB%91/">远足——从黑天到天黑</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="远足——从黑天到天黑"><a href="#远足——从黑天到天黑" class="headerlink" title="远足——从黑天到天黑"></a>远足——从黑天到天黑</h1><h2 id="序"><a href="#序" class="headerlink" title="序"></a>序</h2><p>轰隆隆的大巴车里，周围一片漆黑。</p>
<p><img src="https://pic1.imgdb.cn/item/6370955716f2c2beb19f86c4.png"></p>
<p>车上没有了来时的欢声笑语，氤氲在空气中的，有丝丝酸痛，阵阵睡意，还有独属于少年的自信与热血。回想来时，真的很难相信自己居然一路走了这么远，不免令我想起一段话：</p>
<blockquote>
<p>生活没有你想象的那么好，但也没有你想象的那么糟糕。人的脆弱会超出自己的想象。有时候你发现一句话就会被感动得泪流满面，有时候咬咬牙就已经走了很远。</p>
<pre><code>                                                        ——贺炜
</code></pre>
</blockquote>
<p>还记得小时候吃饺子，妈妈问我要吃几个。我说，我13岁了，吃十三个。现在已经17岁了，我还是吃十三个。时间一点点过去，有些事变了，但我相信有些东西不能改变：敢去想，敢去做。很多人非常现实，他们或许会觉得你不过是白日做梦，痴心妄想，他们甚至会瞧不起你。在学校，我特别能感觉到以成绩论人的氛围。我时常感觉，人与人间的交往是充满傲慢与偏见的，似乎成绩即是一切。当然也并不否认成绩的重要性。在这个所谓的大环境下，只有结果会被看到。太多人才被埋没……世上不止读书高。</p>
<p>心之所向，即是正道。当你在一条路上看到了光，那就走下去吧。</p>
<h2 id="灰色的天"><a href="#灰色的天" class="headerlink" title="灰色的天"></a>灰色的天</h2><p>早上5：15，灰的天，雾蒙蒙的校园，我在睡意朦胧间醒来。寝室里只有两个人，看了会儿书我就下床了。6：50是开幕仪式，之后7：30就乘着车到了绿道的起点出发。</p>
<p><img src="https://pic1.imgdb.cn/item/6370971616f2c2beb1a36129.png"></p>
<blockquote>
<p>天空灰的像哭过。</p>
<p>细密的雨粒才不分你我，</p>
<p>它敲打我心窝，</p>
<p>叫我将往事拾掇。</p>
</blockquote>
<p>过往似云烟细雨，打在脸上，不一会便会消失，却面颊上留下了淡淡的泪痕。或许什么都比不上此刻重要，因为过去是现在所创造的，未来也是。</p>
<p><del>刚开始12公里我似乎还有力气搁这抒情，实际上到永宁公园我就快要没了。</del></p>
<p><a target="_blank" rel="noopener" href="https://pic1.imgdb.cn/item/6370971216f2c2beb1a35ce2.png"><img src="https://pic1.imgdb.cn/item/6370971216f2c2beb1a35ce2.png"></a></p>
<p>一路上，因为有人一起唱歌，所以唱的时候并不尴尬。关于唱的内容，大部分（好像全是）老歌，关于为什么老歌所带来的感觉要远远强于近几年的新歌，我很早就想说一说了</p>
<p><a target="_blank" rel="noopener" href="https://pic1.imgdb.cn/item/6370aa2c16f2c2beb1c35189.png"><img src="https://pic1.imgdb.cn/item/6370aa2c16f2c2beb1c35189.png"></a></p>
<h2 id="为什么我不喜欢新歌"><a href="#为什么我不喜欢新歌" class="headerlink" title="为什么我不喜欢新歌"></a>为什么我不喜欢新歌</h2><p>也并非完全否定近来的新歌，早几年我也曾一度喜欢听。然而问题就是：它太不耐听了，以至于我现在很少去听。在我看来，一方面，近几年的音乐大部分都偏向于阴郁，沉闷。调子带给人的惊喜不多，而且缺少较为激昂的高潮。这就好比一个人一直以一个调调讲话，讲话的时候还没有侧重点，好比念稿一样无聊，谁又会喜欢听呢？</p>
<p>另一方面，如果它不符合我上面所说的特质，那它可能是被互联网毁了。有人可能会问：怎么会呢，互联网大大促进了歌曲的传播。然而在我看来，互联网的广泛传播，使其过于大众化。对于我这种比较喜欢个性化的人来说，与那些我认为品味参差的人为伍，可以说是俗气的。<del>比如《孤勇者》</del></p>
<h2 id="为什么喜欢周杰伦"><a href="#为什么喜欢周杰伦" class="headerlink" title="为什么喜欢周杰伦"></a>为什么喜欢周杰伦</h2><p>包括周杰伦、陈奕迅、孙燕姿在内的老歌手我都非常喜欢，其中最喜欢的当属脚臭（jay chou）了。</p>
<ol>
<li>旋律与歌词</li>
</ol>
<p>这不必多说，好的旋律与歌词是喜欢一首歌的关键。他歌中的rap是我非常喜欢的，《手写的从前》、《发如雪》、《反方向的钟》……</p>
<ol start="2">
<li>共情</li>
</ol>
<p>这是十分重要的一点。他的歌总能让我引发共鸣。</p>
<p>我这个人比较怂，却又比较多情。一次次的遇见，一次次的失去，我不敢去爱了。但当我被爱时，又不知如何去应对了。总是处于如此的矛盾之中，我在他的歌中听到了我的过去。与此同时，他的歌能激励我。当我解数学题解到崩溃，当我在物理题中怀疑人生，不止怎的，一戴上耳机，我仿佛抓住了什么。这可能就是音乐的魅力，每个国家有国歌，音乐是必修课，学校早中晚都在放歌……音乐已然成为生活。</p>
<ol start="3">
<li>个人</li>
</ol>
<p>周杰伦是个非常自信的的人，他的自信也并非没有原因。22年了，他的歌依旧能够收到广泛喜爱，这不是一般人能做到。在他身上，我看到了读书不是惟一的出路，热爱才是。</p>
<h2 id="第二站"><a href="#第二站" class="headerlink" title="第二站"></a>第二站</h2><p><a target="_blank" rel="noopener" href="https://pic1.imgdb.cn/item/6370aa9f16f2c2beb1c3d174.png"><img src="https://pic1.imgdb.cn/item/6370aa9f16f2c2beb1c3d174.png" alt=" "></a></p>
<p>在到这一站的路上，天晴了。</p>
<p>美好的景色，美好的人，在这一刻净收眼底。</p>
<p>眼睛是贪婪的，他将看到的全部收下；心灵是自私的，他只想感受美好的事物。</p>
<p>到这里为止，旅途只剩下最后一段了，我的腿也报废了。再继续走下去，我的腿也只不过是在做机械的运动了。我们班主任最后一批到达休息点。说起班主任，他是一个有趣的人：冷静的外表下实际上尽显闷骚。在没有班级同学的地方，他更是放飞自我。</p>
<h2 id="最后的路程"><a href="#最后的路程" class="headerlink" title="最后的路程"></a>最后的路程</h2><p>现在早已忘却当时的痛，没想到一个人忘记创伤竟如此之快。依稀回想起，只记得当时落日余晖，白马在远处的草坪上埋下头，养马的人在旁静候着。也就是这时，我才真正感受到了追逐梦想时的喜悦与煎熬，我才切身地感受到了什么叫双腿被铅灌了似的。</p>
<p><img src="https://pic.imgdb.cn/item/6379128816f2c2beb12baeb5.png"></p>
<p>红军战士是伟大的，我们所走的42千米在两万五千里长征面前，连蝼蚁都不如。何况他们身后是枪林弹雨，敌军追击，我们走的是一眼能望到尽头的水泥路；他们吃的是花生粒，我们补充的是面包，茶叶蛋，玉米……；他们连夜赶路走了两年，我们不过从早上7点走到下午五点。如果说每一个人都去走一遍长征，我相信，坚持下来的，才是真正心系百姓的人。</p>
<h2 id="终"><a href="#终" class="headerlink" title="终"></a>终</h2><p>我感觉好累，朦胧的意识，昏昏欲睡的大脑，这是终点，我成功了。躺在草坪上，一合上眼便睁不开来了。过了一会儿，爬起来，看看远方的长潭大坝躺在夕阳里，原来这世上真有那么美的东西。</p>
<p><img src="https://pic.imgdb.cn/item/6379126716f2c2beb12b8230.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/11/13/%E8%BF%9C%E8%B6%B3%E2%80%94%E2%80%94%E4%BB%8E%E9%BB%91%E5%A4%A9%E5%88%B0%E5%A4%A9%E9%BB%91/" data-id="cm0hsydwa002yrkwahsp84s68" data-title="远足——从黑天到天黑" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%B0%E5%BD%95/" rel="tag">记录</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-风" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/08/27/%E9%A3%8E/" class="article-date">
  <time class="dt-published" datetime="2022-08-27T01:44:21.000Z" itemprop="datePublished">2022-08-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%87%AA%E8%AE%AB%E6%BC%AB%E8%AE%B0/">自讫漫记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/08/27/%E9%A3%8E/">风</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>风，微风、狂风、耳边的风、溜过指隙的风、记忆中的风、未曾赶来的风……我痴迷于这样一个刮风天，它总能带我回到过去，让泪在风中飘扬。</p>
<p>偶然间，翻开初中的图册。依稀记起，与他们每一个人的相遇。那时的我们，什么都没有，却仿佛拥有着一切。刚进初中，我写了一篇随笔怀念小学同学，而今似乎迎来了一个新的循环。在这嘈杂的时代，偶尔停下来，风滑过脸颊，吹干了汗水，回想过去的种种。也许人就是这样，不断地在回头看着，也不断向前跑着。</p>
<p>最难忘的，无疑是初三，那是我与他熟识的一年……我们都热爱运动，足球，篮球，乒乓球；我们都喜欢诗词，幻想着，哪天能作出“位卑未敢忘忧国”这样都诗句；我们常在那样的一个夜晚，晚风轻轻吹着，我们在昏黄的路灯下走着，就这么走着，走着；我们都不曾忘记那个黄昏，淡淡的云被遗落在天与山连接的地方，秋的落叶将它染成无以言喻的颜色；我们躺在球场上，汗水与露水渗透了校服，草轻轻地扎在背上，痒丝丝的……也许便是一个转角，一个人，一颗无处安放的心就此停下。<br>那天上午，太阳不是很温柔。铃声响起，我没有想象中那么兴奋。似乎就是一个正常的课间，心中却多了一丝悲凉。我走出考场，一级一级踏下台阶。身边是嬉闹的人群，一股脑流下楼道。我就好似洪流中的一块顽石，只是被水流愈加磨得光滑。<br>回到教室，没有几个人留下。他也坐在座位上。我们相视一笑，前后走出教室。做出抉择时，没有多大的波澜。毕竟我们终究不是一个人，我们有自己所向往的未来。也许旁人会说，我们的友谊就如此脆弱，但我们终究不是一个人，我们对未来有所期许。世上没有不离别的伴侣，当我们想通了以后，这一切似乎都是顺其自然。倘若由于自私，而让对方错过他期待的未来，我们会有多么后悔。</p>
<p>不想就此别过，无奈世事，便是如此。</p>
<p>那天下午就开了毕业典礼。我没有落泪。自有记忆起，我好像便只由于父母的责骂而哭泣过。每次眼泪在打转，于是乎又收了回去。可能我把一切都看得太深沉，眼泪没来得及出来就干涸了。<br>我们分开了，此后陆陆续续的联系着，但如同水龙头上的水珠，愈滴愈少了。<br>不久就来到高中。我一度不想交朋友，因为没有人再与他一样了。</p>
<p>小心翼翼地走在路旁的小石障上，独自一人。<br>这是一条很少有人走的路。<br>时节既是晚秋，湖上微波四起。堤岸杨柳垂绿，湖中亭上独立。西石南园风景，谁知我凭栏意？惟吾感遇由心，晓他凄寒随意。本是该伤晨蜉而暮灭，但他初冬暖阳，叫人怎样也无法不向上看。那是一束足以慰风尘、抚涟漪的斜照，一道从云层中透出的光芒。<br>光把风带来。风，她把落叶都吹到一起，然后再吹散，我们身不由己。散了以后呢?光带给我们希望，光是多么伟大……</p>
<p>何时才能回到那段时光，似乎也如现在一般平平淡淡，却止不住让人挂念。也许会有后悔，也许感到遗憾，但我记得你说过的话。你说你会记得我，你说多年之后我们一定会重逢，不论以那种形式，但一定是在一个新的高度。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/27/%E9%A3%8E/" data-id="cm0hsydwb0031rkwae3m16tp7" data-title="风" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9B%9E%E5%BF%86/" rel="tag">回忆</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-luogu-p1488-肥猫的游戏" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/08/19/luogu-p1488-%E8%82%A5%E7%8C%AB%E7%9A%84%E6%B8%B8%E6%88%8F/" class="article-date">
  <time class="dt-published" datetime="2022-08-19T01:41:23.000Z" itemprop="datePublished">2022-08-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%A2%98%E9%9B%86/">题集</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/08/19/luogu-p1488-%E8%82%A5%E7%8C%AB%E7%9A%84%E6%B8%B8%E6%88%8F/">luogu_p1488_肥猫的游戏</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="肥猫的游戏"><a href="#肥猫的游戏" class="headerlink" title="肥猫的游戏"></a>肥猫的游戏</h1><p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P1488">P1488 肥猫的游戏 - 洛谷 | 计算机科学教育新生态 (luogu.com.cn)</a></p>
<h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p>野猫与胖子，合起来简称肥猫，是一个班的同学，他们也都是数学高手，所以经常在一起讨论数学问题也就不足为奇了。</p>
<p>一次，野猫遇到了一道有趣的几何游戏题目，便拿给胖子看。游戏要求在一个有 n 个顶点凸多边形上进行，这个凸多边形的 n-3 条对角线将多边形分成 n-2 个三角形，这 n-3 条对角线在多边形的顶点相交。三角形中的一个被染成黑色，其余是白色。</p>
<p>双方轮流进行游戏，当轮到一方时，他必须沿着画好的对角线，从多边形上切下一个三角形。切下黑色三角形的一方获胜。胖子一看觉得确实很有趣，不如就一起玩玩吧。假设游戏由野猫先开始，那么野猫是否有必胜的策略呢？请写一个程序帮助野猫算一算。</p>
<h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p>第一行为一个整数 n，表示多边形的顶点数，多边形的顶点由 0 至 n-1 顺时针标号。</p>
<p>接着的 n-2 行描述组成多边形的三角形。第 i+1 行  有三个空格分隔的非负整数 a 、b 、c ，它们是第 i 个三角形的顶点编号。第一个给出的三角形是黑色的。</p>
<h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>只有一行，倘若野猫有必胜策略，输出 <code>JMcat Win</code>；否则，输出 <code>PZ Win</code>（注意大小写和空格）。</p>
<h2 id="样例-1"><a href="#样例-1" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">6</span><br><span class="line">0 1 2</span><br><span class="line">2 4 3</span><br><span class="line">4 2 0</span><br><span class="line">0 5 4</span><br></pre></td></tr></table></figure>

<h3 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JMcat Win</span><br></pre></td></tr></table></figure>

<h2 id="提示"><a href="#提示" class="headerlink" title="提示"></a>提示</h2><p>4 &lt;= n &lt;= 50000</p>
<p>如果连接一个多边形中任意两点的线段都完全包含于这个多边形，则称这个多边形为凸多边形。</p>
<p>题解在代码里</p>
<pre><code class="cpp">#include&lt;iostream&gt;
using namespace std;

int n, a, b, c;

int main()
{
    cin &gt;&gt; n;
    cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
    if(a &gt; b)
        swap(a, b);
    if(a &gt; c)
        swap(a, c);
    if(b &gt; c)
        swap(b, c);
    if((a + 1 == b &amp;&amp; b + 1 == c) || (a == 0 &amp;&amp; c == n - 1))
    {
        puts("JMcat Win");
        return 0;
    }
/*
假如顶点连续，则代表这个黑色三角形在外面。
就像是一个多边形上连续三个点构成的三角形必然在外面
那么先手的野猫就赢了
当然还有一个特殊情况：假如黑色三角形同时包括 0 点和 n 点（首尾相连）
就比如：
6
0 5 4
0 1 2
2 4 3
4 2 0
所以要特判一下这种情况
*/
    else if((n - 2) % 2 == 0)
    {
        puts("JMcat Win");
        return 0;
    }
/*
假如黑色三角形被包在里面
先放着别的三角形不管
假设最后只剩三个个三角形包着黑三角
谁把其中一个三角切了谁就输了
胜负就出来了
所以只要考虑三角形个数的奇偶性就行了
*/
    else
        puts("PZ Win");

    return 0;
}
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/19/luogu-p1488-%E8%82%A5%E7%8C%AB%E7%9A%84%E6%B8%B8%E6%88%8F/" data-id="cm0hsydvy000lrkwa53n71pjf" data-title="luogu_p1488_肥猫的游戏" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-哈夫曼编码详解" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/08/17/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81%E8%AF%A6%E8%A7%A3/" class="article-date">
  <time class="dt-published" datetime="2022-08-17T01:39:28.000Z" itemprop="datePublished">2022-08-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/08/17/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81%E8%AF%A6%E8%A7%A3/">哈夫曼编码详解</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="暗道里能听懂"><a href="#暗道里能听懂" class="headerlink" title="暗道里能听懂"></a>暗道里能听懂</h2><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>成绩录入的时候，常常会遇到这种情况<del>（可能没多少学校会这么干）</del></p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/vBEa6g"><img src="https://s1.ax1x.com/2022/08/17/vBEa6g.png" alt="vBEa6g.png"></a></p>
<p>上图中，如果说数据足够多，且都集中于良好的话，每一次录入就需要更多的时间。并且有些时候分支不止这么点。</p>
<h2 id="路径长度"><a href="#路径长度" class="headerlink" title="路径长度"></a>路径长度</h2><p>这个时候，我们就需要让数据大的分支与根节点靠近一点。这里再引入一个概念————路径长度。在一棵树中，一个节点向下，与可以达到的子孙之间的通路成为路径。路径中的分支数成为路径长度。下图中，1 到 5的路径长度为 <strong>2</strong>。当然也可以这么记，路径长度 = 终止层数 - 起始层数。</p>
<p><img src="https://github.com/huaziqi/my-Figure-bed/blob/main/%E6%A0%91.png?raw=true" alt="树.png"></p>
<p>那么当每个节点都带有权时，我们要想办法让权大的路径长度小（默认起点为根节点）。这里我们规定：节点的带权路径长度为：从根节点到该节点之间路径长度与该节点的权值乘积。</p>
<ul>
<li>比如上图，权值为 6 的点，带权路径长度即为2 * 6 = 12.</li>
</ul>
<h2 id="哈夫曼树的含义"><a href="#哈夫曼树的含义" class="headerlink" title="哈夫曼树的含义"></a>哈夫曼树的含义</h2><p>这就回到了文章开头的背景：要让录入成绩效率最高，我们就要构造一棵所有点的带权路径长度最小的树。这样的树，我们就称之为哈夫曼树。</p>
<p>显然，权值越大，越要靠根节点。那么我们可以采用以下建法：</p>
<ol>
<li>将 n 个节点看做是 n 棵子树，权值为 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.339ex;" xmlns="http://www.w3.org/2000/svg" width="2.608ex" height="1.342ex" role="img" focusable="false" viewBox="0 -443 1152.6 593"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></g></svg></mjx-container>, <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.339ex;" xmlns="http://www.w3.org/2000/svg" width="2.608ex" height="1.342ex" role="img" focusable="false" viewBox="0 -443 1152.6 593"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g></g></g></svg></mjx-container>, <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.375ex;" xmlns="http://www.w3.org/2000/svg" width="2.608ex" height="1.377ex" role="img" focusable="false" viewBox="0 -443 1152.6 608.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g></g></g></svg></mjx-container>, …, <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.357ex;" xmlns="http://www.w3.org/2000/svg" width="2.768ex" height="1.359ex" role="img" focusable="false" viewBox="0 -443 1223.3 600.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mi" transform="translate(749,-150) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></g></svg></mjx-container>.选取其中<strong>根节点权值最小</strong>的两个子树，合并为一棵树。两个子树分别为左右子树，根节点权值为两节点之和</li>
<li>删除两棵被合并的子树，加入新树</li>
<li>重复上述步骤，知道只剩下一棵树。</li>
</ol>
<p>再下面这图应该更好理解。</p>
<p><img src="https://github.com/huaziqi/my-Figure-bed/blob/main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202022-08-17%20105024.png?raw=true" alt="屏幕截图 2022-08-17 105024.png"></p>
<blockquote>
<p> 哈夫曼树的构建运用了<strong>贪心</strong>的思想</p>
</blockquote>
<h2 id="应用：哈弗曼编码"><a href="#应用：哈弗曼编码" class="headerlink" title="应用：哈弗曼编码"></a>应用：哈弗曼编码</h2><p>为了一些特殊的用途（<del>如间谍</del>），我们需要将字母或符号转化为01编码。</p>
<p>因为01编码很长，我们要保证不产生歧义。例如 A 的编码是 10， B 是 1， C 是 0。那么101，就会有多个解读：AB? BCB? 关键是必须使任一字符的编码都不是另一字符的编码的前缀。</p>
<p>译码过程：先统计每个字符出现个数，然后构建一个哈夫曼树。</p>
<p>接下来从根节点出发，左0 右1。</p>
<p><img src="https://github.com/huaziqi/my-Figure-bed/blob/main/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%811.PNG?raw=true" alt="哈夫曼编码1.PNG"></p>
<p>完结撒花</p>
<p>2022-8-17 11:14:50</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/17/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81%E8%AF%A6%E8%A7%A3/" data-id="cm0hsydvz000trkwa4zf85mkb" data-title="哈夫曼编码详解" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81/" rel="tag">哈夫曼编码</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-正睿-1139-序列" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/08/05/%E6%AD%A3%E7%9D%BF-1139-%E5%BA%8F%E5%88%97/" class="article-date">
  <time class="dt-published" datetime="2022-08-05T01:37:30.000Z" itemprop="datePublished">2022-08-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%A2%98%E9%9B%86/">题集</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/08/05/%E6%AD%A3%E7%9D%BF-1139-%E5%BA%8F%E5%88%97/">正睿-1139-序列</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="正睿-1139-【线上训练-1】序列"><a href="#正睿-1139-【线上训练-1】序列" class="headerlink" title="正睿 #1139. 【线上训练 1】序列"></a>正睿 #1139. 【线上训练 1】序列</h1><h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p>小 D 正在研究序列。</p>
<p> 对于一个正整数序列而言，小 D 认为他是好的，当且仅当任意相邻两个数字均为 一个奇数和一个偶数。 </p>
<p>形式化地，对于一个序列 b1, b2, · · · , bm 而言，小 D 认为他是好的，当且仅当对 于任意 1 ≤ i &lt; m，有 bi 为奇数且 bi+1 为偶数，或 bi 为偶数且 bi+1 为奇数。 </p>
<p>小 D 得到了一个长度为 n 的序列 a1, a2, · · · , an，小 D 想要通过重新排列它，使 它变为一个好的序列。 小 D 定义一种重新排列方案的代价为重排后每个数字位置差的绝对值之和。小 D 想要最小化重排的代价。</p>
<p> 此外，小 D 还想在最小化重排代价的基础上，最小化结果序列的字典序。 但是小 D 并不会，请你帮帮他。 </p>
<p>注： 我们称一个序列 c1, c2, · · · , cn 字典序小于 d1, d2, · · · , dn，当且仅当存在一个介 于 [1, n] 之间的 i，使得 ci &lt; di，且对于任意 1 ≤ j &lt; i，有 cj = dj。 </p>
<h3 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h3><p>从标准输入读入数据。 第一行一个正整数 n 表示序列的长度。</p>
<p>第二行 n 个空格隔开的正整数，表示 a1, a2, · · · , an。</p>
<h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><p>向标准输出输出答案。 输出一行 n 个空格隔开的正整数，表现字典序最小的结果序列。 数据保证一定可以得到至少一个好的序列。 </p>
<h3 id="样例"><a href="#样例" class="headerlink" title="样例"></a>样例</h3><h4 id="输入-1"><a href="#输入-1" class="headerlink" title="输入"></a>输入</h4><p>5</p>
<p>5 3 1 4 2</p>
<h4 id="输出-1"><a href="#输出-1" class="headerlink" title="输出"></a>输出</h4><p>5 2 1 4 3</p>
<h3 id="约定"><a href="#约定" class="headerlink" title="约定"></a>约定</h3><p>1 &lt;= n &lt;= 100000</p>
<p>1 &lt;= ai &lt;= 1000000000</p>
<h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>看到这题面完全没有想法（除了暴力</p>
<p>然后就思考2分钟，题解两小时</p>
<p>题解的想法：将 奇数偶数相隔性、 字典序最小 和 最小代价 三个条件分开想。</p>
<ul>
<li>奇偶相隔</li>
</ul>
<p>首先要知道一个性质：如果奇数多于偶数，那肯定是奇数包着偶数，例如：1 4 3 2 5。这个时候奇数必须在奇数（下标）的位置上。而当偶数多于奇数，奇数就在偶数下标上。</p>
<ul>
<li>最小代价</li>
</ul>
<p>还是举个例子好理解：假如有两个奇数位置空缺 3 7。而现在有两个符合条件的数 1 3 分别在 4 6 的位置上。</p>
<p>这是最优的情况</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/vnAJiQ"><img src="https://s1.ax1x.com/2022/08/05/vnAJiQ.jpg" alt="好"></a></p>
<p>不好的情况</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/vnA8Ig"><img src="https://s1.ax1x.com/2022/08/05/vnA8Ig.jpg"></a></p>
<p>So, …… 显然吧</p>
<p>也就是如果一个向左一个向右时，左边的向左。</p>
<p>而都要向左或向右时都一样。</p>
<p>向左向右都有的话，我们可以遍历两遍数组，正反各一次。</p>
<ul>
<li>字典序最小</li>
</ul>
<p>开一个优先队列。把数字向左放时，反着遍历，要尽量把小一点的数向前放没问题；那么向右时，要正着遍历， 怎么让小的往前放？取负数。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 100010</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> re register</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, a[N], t[<span class="number">3</span>], ans[N], anss[N];</span><br><span class="line"><span class="type">int</span> num;</span><br><span class="line">priority_queue&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; &gt; ss;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> *aa)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ll ans1 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!ss.<span class="built_in">empty</span>())</span><br><span class="line">        ss.<span class="built_in">pop</span>();<span class="comment">//清空</span></span><br><span class="line">    <span class="type">int</span> s1 = <span class="number">0</span>, t1 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">if</span>(a[i] % <span class="number">2</span> == s)</span><br><span class="line">            s1 ++;</span><br><span class="line">        <span class="keyword">if</span>(s1 &gt; t1)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">if</span>(a[i] % <span class="number">2</span> == s)</span><br><span class="line">                ss.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(- a[i], i));</span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">2</span> == t)</span><br><span class="line">            {</span><br><span class="line">                aa[i] = - ss.<span class="built_in">top</span>().first;</span><br><span class="line">                ans1 += i - ss.<span class="built_in">top</span>().second;</span><br><span class="line">                ss.<span class="built_in">pop</span>();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">2</span> == t)</span><br><span class="line">                t1 ++;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span>(!ss.<span class="built_in">empty</span>())</span><br><span class="line">        ss.<span class="built_in">pop</span>();</span><br><span class="line">    s1 = <span class="number">0</span>, t1 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n; i &gt;= <span class="number">1</span>; i --)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">if</span>(a[i] % <span class="number">2</span> == s)</span><br><span class="line">            s1 ++;</span><br><span class="line">        <span class="keyword">if</span>(s1 &gt; t1)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">if</span>(a[i] % <span class="number">2</span> == s)</span><br><span class="line">                ss.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(a[i], i));</span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">2</span> == t)</span><br><span class="line">            {</span><br><span class="line">                aa[i] = ss.<span class="built_in">top</span>().first;</span><br><span class="line">                ans1 += ss.<span class="built_in">top</span>().second - i;</span><br><span class="line">                ss.<span class="built_in">pop</span>();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">2</span> == t)</span><br><span class="line">                t1 ++;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> ans1;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(re <span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">        t[a[i] &amp; <span class="number">1</span>] ++;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(t[<span class="number">1</span>] != t[<span class="number">0</span>])</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">if</span>(t[<span class="number">1</span>] &gt; t[<span class="number">0</span>])</span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">query</span>(<span class="number">0</span>, <span class="number">0</span>, ans);</span><br><span class="line">            <span class="built_in">query</span>(<span class="number">1</span>, <span class="number">1</span>, ans);<span class="comment">//当奇数多于偶数，奇数对应奇数位，偶数对应偶数位</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d "</span>, ans[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">query</span>(<span class="number">0</span>, <span class="number">1</span>, ans);</span><br><span class="line">            <span class="built_in">query</span>(<span class="number">1</span>, <span class="number">0</span>, ans);<span class="comment">//与上面的相反，奇对偶，偶对奇</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d "</span>, ans[i]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span><span class="comment">//奇等于偶时有两种情况</span></span><br><span class="line">    {</span><br><span class="line">        ll st1 = <span class="built_in">query</span>(<span class="number">0</span>, <span class="number">0</span>, ans) + <span class="built_in">query</span>(<span class="number">1</span>, <span class="number">1</span>, ans);</span><br><span class="line">        ll st2 = <span class="built_in">query</span>(<span class="number">0</span>, <span class="number">1</span>, anss) + <span class="built_in">query</span>(<span class="number">1</span>, <span class="number">0</span>, anss);</span><br><span class="line">        <span class="keyword">if</span>(st1 &gt; st2)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d "</span>, anss[i]);</span><br><span class="line">        }</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(st2 &gt; st1)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d "</span>, ans[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)<span class="comment">//判断字典序</span></span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">if</span>(anss[i] != ans[i])</span><br><span class="line">                {</span><br><span class="line">                    <span class="keyword">if</span>(anss[i] &gt; ans[i])</span><br><span class="line">                        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)</span><br><span class="line">                            <span class="built_in">printf</span>(<span class="string">"%d "</span>, ans[i]);</span><br><span class="line">     </span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)</span><br><span class="line">                            <span class="built_in">printf</span>(<span class="string">"%d "</span>, anss[i]);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }            </span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/05/%E6%AD%A3%E7%9D%BF-1139-%E5%BA%8F%E5%88%97/" data-id="cm0hsydw8002lrkwaedgo3egp" data-title="正睿-1139-序列" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/" rel="tag">优先队列</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-luogu-P1311-选择客栈" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/07/20/luogu-P1311-%E9%80%89%E6%8B%A9%E5%AE%A2%E6%A0%88/" class="article-date">
  <time class="dt-published" datetime="2022-07-20T01:31:17.000Z" itemprop="datePublished">2022-07-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%A2%98%E9%9B%86/">题集</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/07/20/luogu-P1311-%E9%80%89%E6%8B%A9%E5%AE%A2%E6%A0%88/">luogu_P1311_选择客栈</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="选择客栈"><a href="#选择客栈" class="headerlink" title="选择客栈"></a>选择客栈</h2><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>丽江河边有 n 家很有特色的客栈，客栈按照其位置顺序从 1 到 n 编号。每家客栈都按照某一种色调进行装饰（总共 k 种，用整数 0 ~ k-1 表示），且每家客栈都设有一家咖啡店，每家咖啡店均有各自的最低消费。</p>
<p>两位游客一起去丽江旅游，他们喜欢相同的色调，又想尝试两个不同的客栈，因此决定分别住在色调相同的两家客栈中。晚上，他们打算选择一家咖啡店喝咖啡，要求咖啡店位于两人住的两家客栈之间（包括他们住的客栈），且咖啡店的最低消费不超过 p。</p>
<p>他们想知道总共有多少种选择住宿的方案，保证晚上可以找到一家最低消费不超过 p 元的咖啡店小聚。</p>
<h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>共 n+1 行。<br>第一行三个整数 n, k, p，每两个整数之间用一个空格隔开，分别表示客栈的个<br>数，色调的数目和能接受的最低消费的最高值；</p>
<p>接下来的 n 行，第 i+1 行两个整数，之间用一个空格隔开，分别表示 i 号<br>客栈的装饰色调 a_i 和 i 号客栈的咖啡店的最低消费 b_i。</p>
<h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>一个整数，表示可选的住宿方案的总数。</p>
<h4 id="样例"><a href="#样例" class="headerlink" title="样例"></a>样例</h4><h5 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h5><p>5 2 3<br>0 5<br>1 3<br>0 2<br>1 4<br>1 5</p>
<h5 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h5><p>3</p>
<h4 id="提示"><a href="#提示" class="headerlink" title="提示"></a>提示</h4><p><strong>样例解释</strong><br>2 人要住同样色调的客栈，所有可选的住宿方案包括：住客栈①③，②④，②⑤，<br>④⑤，但是若选择住 4,5号客栈的话，4,5 号客栈之间的咖啡店的最低消费是<br>4 ，而两人能承受的最低消费是 3 元，所以不满足要求。因此只有前 3 种方<br>案可选。</p>
<h4 id="数据范围"><a href="#数据范围" class="headerlink" title="数据范围"></a>数据范围</h4><p> 对于 30% 的数据，有 n &lt;= 100 ；<br> 对于 50% 的数据，有 n &lt;= 1,000；<br> 对于 100% 的数据，有 2 &lt;= n &lt;= 2 * (10^5)，1 &lt;= k &lt;= 50，<br>0 &lt;= p &lt;=100，0 &lt;= b_i &lt;= 100。</p>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>看到数据大小 —— 200000，就显然不是dp，但我也不知道是什么算法，所以就直接暴力得了。但是作为一个优雅的人，暴力骗分也得优雅。</p>
<p>既然题目里数据是不修改的，他又要求这个区间里有没有不超过预算的咖啡店，所以我们可以用前缀和 O(1) 求区间值。</p>
<p>接下来就是怎么枚举区间了，如果是套两重循环<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="5.832ex" height="2.452ex" role="img" focusable="false" viewBox="0 -833.9 2577.6 1083.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msup" transform="translate(1152,0)"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mn" transform="translate(633,363) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(2188.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>，能过一半的点。但是暴力就要暴到底，我赌他数据很水。又因为题目里说只能住同种分格的房间，所以，可以用链表记录下一个和他同类型的房间的下标。之后只需要遍历一遍区间，枚举到每个点时，while循环区间右点，前缀和求值，如果该区间值大于0，ans++。</p>
<p>继续思考，我们可以发现一个特性：左端点已确定， 如果一个右端点与左端点包括的区间内有一个可行的咖啡店，那么后面的同种分格右端点就一定可行。</p>
<p>优雅!</p>
<h3 id="考间代码"><a href="#考间代码" class="headerlink" title="考间代码"></a>考间代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> GCC optimize(2)</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 200020</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> re register</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, k, p;</span><br><span class="line"><span class="type">int</span> sum[N], money, style, is_low;</span><br><span class="line"><span class="type">int</span> nxt[N], head[N], after[N];</span><br><span class="line"><span class="type">int</span> ans;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; alls[<span class="number">55</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;n, &amp;k, &amp;p);</span><br><span class="line">    <span class="keyword">for</span>(re <span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;style, &amp;money);</span><br><span class="line">        <span class="keyword">if</span>(money &lt;= p)</span><br><span class="line">            is_low = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            is_low = <span class="number">0</span>;</span><br><span class="line">        sum[i] = sum[i - <span class="number">1</span>] + is_low;</span><br><span class="line">        alls[style].<span class="built_in">push_back</span>(i);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(re <span class="type">int</span> i = <span class="number">0</span>; i &lt; k; i ++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt; alls[i].<span class="built_in">size</span>(); j ++)</span><br><span class="line">        {</span><br><span class="line">            nxt[alls[i][j - <span class="number">1</span>]] = alls[i][j];</span><br><span class="line">            after[alls[i][j - <span class="number">1</span>]] = alls[i].<span class="built_in">size</span>() - j;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// for(int i = 1; i &lt;= n; i ++)</span></span><br><span class="line">    <span class="comment">//     cout &lt;&lt; after[i] &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(re <span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)</span><br><span class="line">    {</span><br><span class="line">        <span class="type">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="type">int</span> v = nxt[i];</span><br><span class="line">        <span class="keyword">while</span>(v != <span class="number">0</span>)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">if</span>(sum[v] - sum[i - <span class="number">1</span>] &gt; <span class="number">0</span>)</span><br><span class="line">                is_low = <span class="number">1</span>, flag = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                is_low = <span class="number">0</span>;</span><br><span class="line">            ans += is_low;</span><br><span class="line">            <span class="keyword">if</span>(flag)</span><br><span class="line">            {</span><br><span class="line">                ans += after[v];</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            v = nxt[v];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="暴力代码"><a href="#暴力代码" class="headerlink" title="暴力代码"></a>暴力代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> GCC optimize(2)</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 200020</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> re register</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, k, p;</span><br><span class="line"><span class="type">int</span> sum[N], money, style, is_low;</span><br><span class="line"><span class="type">int</span> nxt[N], head[N], after[N], st[N];</span><br><span class="line"><span class="type">int</span> ans;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; alls[<span class="number">55</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;n, &amp;k, &amp;p);</span><br><span class="line">    <span class="keyword">for</span>(re <span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;st[i], &amp;money);</span><br><span class="line">        <span class="keyword">if</span>(money &lt;= p)</span><br><span class="line">            is_low = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            is_low = <span class="number">0</span>;</span><br><span class="line">        sum[i] = sum[i - <span class="number">1</span>] + is_low;</span><br><span class="line">        alls[style].<span class="built_in">push_back</span>(i);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i ++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = i + <span class="number">1</span>; j &lt;= n; j ++)</span><br><span class="line">        {</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(st[i] == st[j] &amp;&amp; sum[j] - sum[i - <span class="number">1</span>] &gt; <span class="number">0</span>)</span><br><span class="line">                ans ++;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/07/20/luogu-P1311-%E9%80%89%E6%8B%A9%E5%AE%A2%E6%A0%88/" data-id="cm0hsydvw000erkwah7c8aqj0" data-title="luogu_P1311_选择客栈" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-luogu-p1129-矩阵游戏" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/07/19/luogu-p1129-%E7%9F%A9%E9%98%B5%E6%B8%B8%E6%88%8F/" class="article-date">
  <time class="dt-published" datetime="2022-07-19T01:24:22.000Z" itemprop="datePublished">2022-07-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%A2%98%E9%9B%86/">题集</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/07/19/luogu-p1129-%E7%9F%A9%E9%98%B5%E6%B8%B8%E6%88%8F/">luogu_p1129_矩阵游戏</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="ZJOI2007-矩阵游戏"><a href="#ZJOI2007-矩阵游戏" class="headerlink" title="[ZJOI2007] 矩阵游戏"></a>[ZJOI2007] 矩阵游戏</h1><h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p>小 Q 是一个非常聪明的孩子，除了国际象棋，他还很喜欢玩一个电脑益智游戏――矩阵游戏。矩阵游戏在一个 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="5.481ex" height="1.136ex" role="img" focusable="false" viewBox="0 -491 2422.4 502"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(822.2,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></g><g data-mml-node="mi" transform="translate(1822.4,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container> 黑白方阵进行（如同国际象棋一般，只是颜色是随意的）。每次可以对该矩阵进行两种操作：</p>
<ul>
<li>行交换操作：选择矩阵的任意两行，交换这两行（即交换对应格子的颜色）。</li>
<li>列交换操作：选择矩阵的任意两列，交换这两列（即交换对应格子的颜色）。</li>
</ul>
<p>游戏的目标，即通过若干次操作，使得方阵的主对角线(左上角到右下角的连线)上的格子均为黑色。</p>
<p>对于某些关卡，小 Q 百思不得其解，以致他开始怀疑这些关卡是不是根本就是无解的！于是小 Q 决定写一个程序来判断这些关卡是否有解。</p>
<h2 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h2><p><strong>本题单测试点内有多组数据</strong>。</p>
<p>第一行包含一个整数 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.593ex" height="1.532ex" role="img" focusable="false" viewBox="0 -677 704 677"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g></g></g></svg></mjx-container>，表示数据的组数，对于每组数据，输入格式如下：</p>
<p>第一行为一个整数，代表方阵的大小 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.357ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 600 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container>。<br>接下来 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.357ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 600 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container> 行，每行 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.357ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 600 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container> 个非零即一的整数，代表该方阵。其中 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 500 688"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></svg></mjx-container> 表示白色，<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.131ex" height="1.507ex" role="img" focusable="false" viewBox="0 -666 500 666"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></svg></mjx-container> 表示黑色。</p>
<h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>对于每组数据，输出一行一个字符串，若关卡有解则输出 <code>Yes</code>，否则输出 <code>No</code>。</p>
<h2 id="样例-1"><a href="#样例-1" class="headerlink" title="样例 #1"></a>样例 #1</h2><h3 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入 #1"></a>样例输入 #1</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">2</span><br><span class="line">0 0</span><br><span class="line">0 1</span><br><span class="line">3</span><br><span class="line">0 0 1</span><br><span class="line">0 1 0</span><br><span class="line">1 0 0</span><br></pre></td></tr></table></figure>

<h3 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出 #1"></a>样例输出 #1</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">No</span><br><span class="line">Yes</span><br></pre></td></tr></table></figure>

<h2 id="提示"><a href="#提示" class="headerlink" title="提示"></a>提示</h2><h4 id="数据规模与约定"><a href="#数据规模与约定" class="headerlink" title="数据规模与约定"></a>数据规模与约定</h4><ul>
<li>对于 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g></g></g></svg></mjx-container> 的数据，保证 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.312ex;" xmlns="http://www.w3.org/2000/svg" width="5.506ex" height="1.842ex" role="img" focusable="false" viewBox="0 -676 2433.6 814"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(877.8,0)"><path data-c="2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></g><g data-mml-node="mn" transform="translate(1933.6,0)"><path data-c="37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path></g></g></g></svg></mjx-container>。</li>
<li>对于 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g></g></g></svg></mjx-container> 的数据，保证 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.312ex;" xmlns="http://www.w3.org/2000/svg" width="6.637ex" height="1.819ex" role="img" focusable="false" viewBox="0 -666 2933.6 804"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(877.8,0)"><path data-c="2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></g><g data-mml-node="mn" transform="translate(1933.6,0)"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g></g></g></svg></mjx-container>。</li>
<li>对于 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="3.394ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1500 688"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1000,0)"></path></g></g></g></svg></mjx-container> 的数据，保证 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.312ex;" xmlns="http://www.w3.org/2000/svg" width="11.917ex" height="1.819ex" role="img" focusable="false" viewBox="0 -666 5267.1 804"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(777.8,0)"><path data-c="2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></g><g data-mml-node="mi" transform="translate(1833.6,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(2711.3,0)"><path data-c="2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></g><g data-mml-node="mn" transform="translate(3767.1,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1000,0)"></path></g></g></g></svg></mjx-container>，<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.312ex;" xmlns="http://www.w3.org/2000/svg" width="11.021ex" height="1.844ex" role="img" focusable="false" viewBox="0 -677 4871.1 815"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(777.8,0)"><path data-c="2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></g><g data-mml-node="mi" transform="translate(1833.6,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g><g data-mml-node="mo" transform="translate(2815.3,0)"><path data-c="2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path></g><g data-mml-node="mn" transform="translate(3871.1,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path></g></g></g></svg></mjx-container>。</li>
</ul>
<h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><p>比赛时的想法是：每行每列只能平行移动，这就说明每一行和每一列必须要有一个方块，</p>
<p><del>然而只骗了20分</del></p>
<p>正解居然是二分图匹配！先回想一下二分图匹配的作用：匹配尽量多的边，使其形成一个二分图。二分图就是将所有的点分成两边，是这两部分内部没有边相连。</p>
<p>那这道题为什么是二分图匹配？例如一个点（1， 3）是 1，那他只有到（3， 3）才有用。那就是 1 匹配 3 。只有 n 条边匹配成功才视为形成一条斜线。所列哇  二分图匹配。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 520</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> M 100010</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, opt, T;</span><br><span class="line"><span class="type">int</span> h[N], e[M], nxt[M], idx;</span><br><span class="line"><span class="type">int</span> match[N];</span><br><span class="line"><span class="type">bool</span> st[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = h[x]; i; i = nxt[i])</span><br><span class="line">    {</span><br><span class="line">        <span class="type">int</span> j = e[i];</span><br><span class="line">        <span class="keyword">if</span>(!st[j])</span><br><span class="line">        {</span><br><span class="line">            st[j] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span>(!match[j] || <span class="built_in">find</span>(match[j]))</span><br><span class="line">            {</span><br><span class="line">                match[j] = x;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    e[++ idx] = v;</span><br><span class="line">    nxt[idx] = h[u];</span><br><span class="line">    h[u] = idx;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    cin &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span>(T --)</span><br><span class="line">    {</span><br><span class="line">        idx = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">memset</span>(h, <span class="number">0</span>, <span class="built_in">sizeof</span>(h));</span><br><span class="line">        <span class="built_in">memset</span>(nxt, <span class="number">0</span>, <span class="built_in">sizeof</span>(nxt));</span><br><span class="line">        <span class="built_in">memset</span>(e, <span class="number">0</span>, <span class="built_in">sizeof</span>(e));</span><br><span class="line">        <span class="built_in">memset</span>(match, <span class="number">0</span>, <span class="built_in">sizeof</span>(match));</span><br><span class="line">        </span><br><span class="line">        cin &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j ++)</span><br><span class="line">            {</span><br><span class="line">                cin &gt;&gt; opt;</span><br><span class="line">                <span class="keyword">if</span>(opt)</span><br><span class="line">                    <span class="built_in">add</span>(i, j);</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)</span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">memset</span>(st, <span class="literal">false</span>, <span class="built_in">sizeof</span>(st));</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">find</span>(i))</span><br><span class="line">                res ++;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(res == n)</span><br><span class="line">            cout &lt;&lt; <span class="string">"Yes"</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            cout &lt;&lt; <span class="string">"No"</span> &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}           </span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/07/19/luogu-p1129-%E7%9F%A9%E9%98%B5%E6%B8%B8%E6%88%8F/" data-id="cm0hsydvv000arkwah1ftc0rr" data-title="luogu_p1129_矩阵游戏" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%8C%E5%88%86%E5%9B%BE%E5%8C%B9%E9%85%8D/" rel="tag">二分图匹配</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-字典树" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/05/14/%E5%AD%97%E5%85%B8%E6%A0%91/" class="article-date">
  <time class="dt-published" datetime="2022-05-14T01:22:23.000Z" itemprop="datePublished">2022-05-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/05/14/%E5%AD%97%E5%85%B8%E6%A0%91/">字典树</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="tire-字典树"><a href="#tire-字典树" class="headerlink" title="tire 字典树"></a>tire 字典树</h1><h2 id="先来个模板"><a href="#先来个模板" class="headerlink" title="先来个模板"></a>先来个模板</h2><p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/144/">142. 前缀统计 - AcWing题库</a></p>
<h3 id="什么是字典树呢？"><a href="#什么是字典树呢？" class="headerlink" title="什么是字典树呢？"></a>什么是字典树呢？</h3><p><del>就是存字典的树嘛</del>，差不多的赶脚。</p>
<p>确实是将所有字符存入其中，方便查找（多是查找前缀）。怎么存捏？如下图</p>
<p><img src="https://img-blog.csdnimg.cn/cd20dd2a360041949da584c0ce21bc0c.png#pic_center" alt="trie"></p>
<h4 id="建树"><a href="#建树" class="headerlink" title="建树"></a>建树</h4><p>差不多是这个意思，但并非是把所有字符的空间给开出来，这就要讲到如何建树了。</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> root = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; str[i]; i ++)</span><br><span class="line">	{</span><br><span class="line">		<span class="type">int</span> s = str[i] - <span class="string">'a'</span>;</span><br><span class="line">		<span class="keyword">if</span>(!son[root][s]) son[root][s] = ++ idx;</span><br><span class="line">		root = son[root][s];</span><br><span class="line">	}</span><br><span class="line">	cnt[root]++;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>root 节点设为0。son{ root }{ s }表示root这个节点上的s的编号idx。倘若这个点没有被创建，那就 son{ root }{ s } = ++ idx; 感觉这个 root 有并查集那味儿。存储他儿子的编号，便于查找。这时候就有读者要问，这个cnt{ N }是干嘛用的呢？答案是记录以这个点为结尾的数量。在搜前缀时，不一定只有一个字符从这里结束，所以要记录一下数量。</p>
<h4 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">search</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> root = <span class="number">0</span>, res = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; str[i]; i ++)</span><br><span class="line">	{</span><br><span class="line">		<span class="type">int</span> s = str[i] - <span class="string">'a'</span>;</span><br><span class="line">		<span class="keyword">if</span>(!son[root][s]) <span class="keyword">break</span>;</span><br><span class="line">		root = son[root][s];</span><br><span class="line">		res += cnt[root];</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> res;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>如果说下面没有节点了就直接break掉。并且这里cnt数组派上用场了。res每次加一个cnt{ root }.最后返回答案。</p>
<p>2022-5-12 21:09:37</p>
<h2 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h2><p><a target="_blank" rel="noopener" href="https://www.acwing.com/activity/content/problem/content/396/">AcWing 161. 电话列表 - AcWing</a></p>
<p>给出一个电话列表，如果列表中存在其中一个号码是另一个号码的前缀这一情况，那么就称这个电话列表是不兼容的。</p>
<p>假设电话列表如下：</p>
<ul>
<li><code>Emergency 911</code></li>
<li><code>Alice 97 625 999</code></li>
<li><code>Bob 91 12 54 26</code></li>
</ul>
<p>在此例中，报警电话号码（<code>911</code>）为 Bob 电话号码（<code>91 12 54 26</code>）的前缀，所以该列表不兼容。</p>
<h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行输入整数 t，表示测试用例数量。</p>
<p>对于每个测试用例，第一行输入整数 n，表示电话号码数量。</p>
<p>接下来 n 行，每行输入一个电话号码，号码内数字之间无空格，电话号码不超过 10 位。</p>
<h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>对于每个测试用例，如果电话列表兼容，则输出 <code>YES</code>。</p>
<p>否则，输出 <code>NO</code>。</p>
<h4 id="数据范围"><a href="#数据范围" class="headerlink" title="数据范围"></a>数据范围</h4><p>1≤t≤40,<br>1≤n≤10000</p>
<h4 id="输入样例："><a href="#输入样例：" class="headerlink" title="输入样例："></a>输入样例：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">3</span><br><span class="line">911</span><br><span class="line">97625999</span><br><span class="line">91125426</span><br><span class="line">5</span><br><span class="line">113</span><br><span class="line">12340</span><br><span class="line">123440</span><br><span class="line">12345</span><br><span class="line">98346</span><br></pre></td></tr></table></figure>

<h4 id="输出样例："><a href="#输出样例：" class="headerlink" title="输出样例："></a>输出样例：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NO</span><br><span class="line">YES</span><br></pre></td></tr></table></figure>

<p>跟模板差不多，只不过在搜的时候要一个一个搜，并且它并非求前缀的数量，所以用bool判断就好了。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 500010</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> M 1000010</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, f;</span><br><span class="line"><span class="type">int</span> son[N][<span class="number">30</span>], idx, cnt[N], T;</span><br><span class="line"><span class="type">char</span> str[M][<span class="number">15</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">char</span> *s)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> root = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; s[i]; i ++)</span><br><span class="line">	{</span><br><span class="line">		<span class="type">int</span> st = s[i] - <span class="string">'0'</span>;</span><br><span class="line">		<span class="keyword">if</span>(!son[root][st]) son[root][st] = ++ idx;</span><br><span class="line">		root = son[root][st];</span><br><span class="line">		cnt[root]++;</span><br><span class="line">	}</span><br><span class="line">	</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">search</span><span class="params">(<span class="type">char</span> *s)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="type">int</span> root = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; s[i]; i ++)</span><br><span class="line">	{</span><br><span class="line">		<span class="type">int</span> st = s[i] - <span class="string">'0'</span>;</span><br><span class="line">		<span class="keyword">if</span>(cnt[son[root][st]]==<span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		root = son[root][st];</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">	<span class="keyword">while</span>(T --)</span><br><span class="line">	{</span><br><span class="line">		f=<span class="number">0</span>;</span><br><span class="line">		idx=<span class="number">0</span>;</span><br><span class="line">		<span class="built_in">memset</span>(son[<span class="number">0</span>],<span class="number">0</span>,<span class="keyword">sizeof</span> son);</span><br><span class="line">        <span class="built_in">memset</span>(cnt,<span class="number">0</span>,<span class="keyword">sizeof</span> cnt);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">		{</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%s"</span>, str[i]);</span><br><span class="line">			<span class="built_in">insert</span>(str[i]);</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">		{</span><br><span class="line">			<span class="keyword">if</span>(<span class="built_in">search</span>(str[i]))</span><br><span class="line">			{</span><br><span class="line">				f=<span class="number">1</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">if</span>(f == <span class="number">1</span>) <span class="built_in">puts</span>(<span class="string">"NO"</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"YES"</span>);</span><br><span class="line">	}</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<p>2022-5-12 21:34:32</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/05/14/%E5%AD%97%E5%85%B8%E6%A0%91/" data-id="cm0hsydw7002hrkwa97p3abh1" data-title="字典树" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-acwing-802-区间和" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/05/08/acwing-802-%E5%8C%BA%E9%97%B4%E5%92%8C/" class="article-date">
  <time class="dt-published" datetime="2022-05-08T01:35:07.000Z" itemprop="datePublished">2022-05-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a>►<a class="article-category-link" href="/categories/%E9%A2%98%E9%9B%86/">题集</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/05/08/acwing-802-%E5%8C%BA%E9%97%B4%E5%92%8C/">acwing_802_区间和</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="离散化"><a href="#离散化" class="headerlink" title="离散化"></a>离散化</h1><hr>
<ul>
<li>就题论题来讲</li>
</ul>
<h2 id="acwing-802-区间和"><a href="#acwing-802-区间和" class="headerlink" title="acwing 802. 区间和"></a>acwing 802. 区间和</h2><p>假定有一个无限长的数轴，数轴上每个坐标上的数都是 0。<br>现在，我们首先进行 n次操作，每次操作将某一位置 x上的数加 c。</p>
<p>接下来，进行 m次询问，每个询问包含两个整数 l 和 r ，你需要求出在区间 [l,r]之间的所有数的和。</p>
<h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行包含两个整数 n 和 m。</p>
<p>接下来 n 行，每行包含两个整数 x 和 c 。</p>
<p>再接下来 m 行，每行包含两个整数 l 和 r 。</p>
<h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>共 m 行，每行输出一个询问中所求的区间内数字和。</p>
<h4 id="数据范围"><a href="#数据范围" class="headerlink" title="数据范围"></a>数据范围</h4><p>-109≤x≤109,<br>1≤n,m≤10^5,<br>-109≤l≤r≤109,<br>-10000≤c≤10000</p>
<h4 id="输入样例"><a href="#输入样例" class="headerlink" title="输入样例"></a>输入样例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">3 3</span><br><span class="line">1 2</span><br><span class="line">3 6</span><br><span class="line">7 5</span><br><span class="line">1 3</span><br><span class="line">4 6</span><br><span class="line">7 8</span><br></pre></td></tr></table></figure>

<h4 id="输出样例"><a href="#输出样例" class="headerlink" title="输出样例"></a>输出样例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">8</span><br><span class="line">0</span><br><span class="line">5</span><br></pre></td></tr></table></figure>

<h2 id="简吸"><a href="#简吸" class="headerlink" title="简吸"></a>简吸</h2><p>离散化的整体思路还是简单的，就是当数据相差大而数量小时，用数组把每个数字映射到一个下标上。<br>~~刚开始不想看这题是因为对于pair的用法有点迷。~~~~~~</p>
<p>浅浅一学以后其实感觉pair跟struct没什么区别。<br>其次就是这个auto，<del>之前学长来教的时候就没讲清楚.</del></p>
<p>现在看了题解大概能猜出是什么用的，格式是for(auto opt : add)。<br>auto是自动的意思，那么这个语法相而易见就是自动地遍历add这个数组中所有数据。</p>
<p>这题思路就是先把所有的数据中提到的点读入，即 n 个有数据的点，及 m 个 l，r（要求的区间和），并将数据中提到的数轴上的点和数值（x，c）放到add中，再把要求的区间 l，r 放入query中，以便后续将这些点在排序过后 point 中找出下标。</p>
<p>当把 point全部排序去重后，遍历一遍add数组，用二分找出每一个数据在 point （存所有数据点）中的下标 i ，在数组 a[ i ] 中加上值 c 。</p>
<p>既然要求区间和，那就用O(N)的时间复杂度 用前缀和的存入s[ N ] 中。<br>最后再用auto遍历query，用前缀和输出值。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 300010</span></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; PII;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n,m,x,c,a[N],s[N];</span><br><span class="line">vector&lt;PII&gt; adds,query;<span class="comment">//add 存储所给的点和数据，query存储要求的区间</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; point;<span class="comment">//point 存储的是包括 x（题中给出的有数据的点）及 l , r(要求的区间)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span>{</span><br><span class="line">    <span class="type">int</span> l=<span class="number">0</span>,r=point.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;r){</span><br><span class="line">        <span class="type">int</span> mid=l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (point[mid]&gt;=x)</span><br><span class="line">            r=mid;</span><br><span class="line">        <span class="keyword">else</span> l=mid<span class="number">+1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> r<span class="number">+1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n;i ++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;c);</span><br><span class="line">        adds.<span class="built_in">push_back</span>({x,c});</span><br><span class="line">        point.<span class="built_in">push_back</span>(x);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="type">int</span> l,r;</span><br><span class="line">        cin&gt;&gt;l&gt;&gt;r;</span><br><span class="line">        query.<span class="built_in">push_back</span>({l,r});</span><br><span class="line">        point.<span class="built_in">push_back</span>(l);</span><br><span class="line">        point.<span class="built_in">push_back</span>(r);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">sort</span>(point.<span class="built_in">begin</span>(),point.<span class="built_in">end</span>());</span><br><span class="line">    point.<span class="built_in">erase</span>(<span class="built_in">unique</span>(point.<span class="built_in">begin</span>(),point.<span class="built_in">end</span>()),point.<span class="built_in">end</span>());<span class="comment">//去重</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> opt : adds){</span><br><span class="line">        <span class="type">int</span> num=<span class="built_in">find</span>(opt.first);</span><br><span class="line">        a[num]+=opt.second;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=point.<span class="built_in">size</span>();i++)</span><br><span class="line">        s[i]=s[i<span class="number">-1</span>]+a[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> opt : query){</span><br><span class="line">        <span class="type">int</span> l=<span class="built_in">find</span>(opt.first),r=<span class="built_in">find</span>(opt.second);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,s[r]-s[l<span class="number">-1</span>]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>2022-05-02 15:03:35 完结</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/05/08/acwing-802-%E5%8C%BA%E9%97%B4%E5%92%8C/" data-id="cm0hsydvu0006rkwa9hf2hh9p" data-title="acwing_802_区间和" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%A6%BB%E6%95%A3%E5%8C%96/" rel="tag">离散化</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-栈的应用" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/05/04/%E6%A0%88%E7%9A%84%E5%BA%94%E7%94%A8/" class="article-date">
  <time class="dt-published" datetime="2022-05-04T01:12:21.000Z" itemprop="datePublished">2022-05-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%A2%98%E9%9B%86/">题集</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/05/04/%E6%A0%88%E7%9A%84%E5%BA%94%E7%94%A8/">栈的应用</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="栈的应用"><a href="#栈的应用" class="headerlink" title="栈的应用"></a>栈的应用</h1><p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/152/">acwing150 括号画家</a></p>
<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>达达是一名漫画家，她有一个奇特的爱好，就是在纸上画括号。</p>
<p>这一天，刚刚起床的达达画了一排括号序列，其中包含小括号 ( )、中括号 [ ] 和大括号 { }，总长度为 N。</p>
<p>这排随意绘制的括号序列显得杂乱无章，于是达达定义了什么样的括号序列是美观的：</p>
<p>空的括号序列是美观的；<br>若括号序列 A 是美观的，则括号序列 ( A )、[ A ]、{ A } 也是美观的。<br>若括号序列 A、B 都是美观的，则括号序列 AB 也是美观的。<br>例如 [ ( ){ } ] ( ) 是美观的括号序列，而 ) ( { ) [ } ] ( 则不是。</p>
<p>现在达达想在她绘制的括号序列中，找出其中连续的一段，满足这段子串是美观的，并且长度尽量大。</p>
<p>你能帮帮她吗？</p>
<h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>输入一行由括号组成的字符串。</p>
<h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>输出一个整数，表示最长的美观的子段的长度。</p>
<h4 id="数据范围"><a href="#数据范围" class="headerlink" title="数据范围"></a>数据范围</h4><p>字符串长度不超过 105。</p>
<h4 id="输入样例"><a href="#输入样例" class="headerlink" title="输入样例"></a>输入样例</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">({({(({()}})}{())})})[){{{([)()((()]]}])[{)]}{[}{)</span><br></pre></td></tr></table></figure>

<h4 id="输出样例"><a href="#输出样例" class="headerlink" title="输出样例"></a>输出样例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure>

<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>这题是栈的应用，或是说栈的性质。</p>
<p>如何找出一个括号对？栈！ 如果是左括号 ( [ { 就入栈，如果是右括号 ) ] } 并且栈顶元素为其相应的左括号，就出栈左括号；否则入栈右括号。我们来手搓一遍样例：</p>
<ul>
<li>( { ( { ( ( { ( 全都是左括号，直接入栈。</li>
<li>读入右括号 ) 且栈顶元素为 ( ，出栈，序列为 ( { ( { ( ( {</li>
<li>读入右括号 } 且栈顶元素为 { ，出栈，序列为 ( { ( { ( (</li>
<li>读入右括号 } ，而栈顶元素为 ( ，入栈 }</li>
</ul>
<p>对于一些细节问题与疑问，我们先来看代码</p>
<h3 id="先上代码"><a href="#先上代码" class="headerlink" title="先上代码"></a>先上代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 100010</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> ans;</span><br><span class="line"><span class="type">char</span> c[N];</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; stk;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%s"</span>,c);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="built_in">strlen</span>(c);i++){</span><br><span class="line">		<span class="type">char</span> s=c[i];</span><br><span class="line">		<span class="keyword">if</span>(s==<span class="string">')'</span>&amp;&amp;stk.<span class="built_in">size</span>()&amp;&amp;c[stk.<span class="built_in">top</span>()]==<span class="string">'('</span>) </span><br><span class="line">			stk.<span class="built_in">pop</span>();</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(s==<span class="string">'}'</span>&amp;&amp;stk.<span class="built_in">size</span>()&amp;&amp;c[stk.<span class="built_in">top</span>()]==<span class="string">'{'</span>) </span><br><span class="line">			stk.<span class="built_in">pop</span>();</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(s==<span class="string">']'</span>&amp;&amp;stk.<span class="built_in">size</span>()&amp;&amp;c[stk.<span class="built_in">top</span>()]==<span class="string">'['</span>) </span><br><span class="line">			stk.<span class="built_in">pop</span>();</span><br><span class="line">		<span class="keyword">else</span> </span><br><span class="line">			stk.<span class="built_in">push</span>(i);</span><br><span class="line">		<span class="keyword">if</span>(stk.<span class="built_in">size</span>()!=<span class="number">0</span>) </span><br><span class="line">			ans=<span class="built_in">max</span>(ans,i-stk.<span class="built_in">top</span>());</span><br><span class="line">		<span class="keyword">else</span> </span><br><span class="line">			ans=<span class="built_in">max</span>(ans,i<span class="number">+1</span>);</span><br><span class="line">	}</span><br><span class="line">	</span><br><span class="line">	cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>这段代码有几个细节要注意：</p>
<ol>
<li>他的栈的类型为int，所以对应的是字符串 c 中的下标</li>
<li>因为用的是int，所以计算最大序列的方式是 i-stk.top() ，i为当前字符串下标，stk.top()是栈顶的字符串下标。比如 i = 6 时，前面的括号由于相互对应而出栈， stk.top() 为 3 ，res则为 3 。</li>
<li>对于栈的判空，当栈为空，无法返回栈顶元素，读入右括号时，就直接入栈；当栈无法返回栈顶元素，res就为 i + 1。</li>
</ol>
<h2 id="第二道"><a href="#第二道" class="headerlink" title="第二道"></a>第二道</h2><p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/153/">151. 表达式计算4 - AcWing题库</a></p>
<p>受不了了，又调好久，感觉是表达式求值的究极版。</p>
<h3 id="分析-1"><a href="#分析-1" class="headerlink" title="分析"></a>分析</h3><p>先不考虑括号，只考虑运算符。</p>
<p>首先，我们都知道。一个表达式可以用二叉树表达，也就是一个中缀表达式的中序遍历。要用一个迭代的方式来运算递归的式子，用栈是很方便的。说了这么多，也就是说，像第一道括号配对和表达式求值这样的题目，就用栈来做。</p>
<p>接下来，我们来思考一下如何才能让按照运算符有序地计算？因为优先级只有两种情况：1.比前面优先 2.前面优先。那么我们只要让优先级为单调递增，运算起来就会十分方便。实现方法就是当读入运算符时，与栈顶的运算符进行比较，如果优先级低于或等于栈顶的运算符，那就直接运算。</p>
<p>接下来再来考虑括号的情况。既然括号内的式子必须先计算，那么当遇到右括号，就一直进行向前的运算。因为此时的优先级为递增，所以从后往前算没毛病，直到遇到左括号停止。</p>
<blockquote>
<p>小技巧：如何让栈内只剩下答案：可以在最右边额外加上一个‘ ）’那么就可以将括号内剩余的值算完</p>
</blockquote>
<p>最后，我们只剩下一些特殊情况要处理：</p>
<ol>
<li>负号与减号混淆。负号如果是在式子首，即str[ 0 ]=’ - ‘，那就直接判定接下来的数字为负数。如果不是式子首，就要判断前面不是数字，不是‘ ）’，那就是负号。否则是减号。</li>
<li>式子可能会有很多个右括号，可以在式子前加上许多 ( 来避免错误。左括号也没有什么影响。（题目坑人）</li>
</ol>
<p>更多小细节可以细看代码，虽然看起来很长，其实内容并不复杂。</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">stack&lt;<span class="type">int</span>&gt; nums;</span><br><span class="line">stack&lt;<span class="type">char</span>&gt; ops;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">qmi</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> k)</span></span>{</span><br><span class="line">    <span class="type">int</span> res=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (k--) res*=a;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">cal</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="type">int</span> a=nums.<span class="built_in">top</span>();nums.<span class="built_in">pop</span>();</span><br><span class="line">    <span class="type">int</span> b=nums.<span class="built_in">top</span>();nums.<span class="built_in">pop</span>();</span><br><span class="line">    <span class="type">char</span> c=ops.<span class="built_in">top</span>();ops.<span class="built_in">pop</span>();</span><br><span class="line">    <span class="type">int</span> d;</span><br><span class="line">    <span class="keyword">if</span> (c==<span class="string">'+'</span>)d=b+a;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (c==<span class="string">'-'</span>) d=b-a;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (c==<span class="string">'*'</span>) d=b*a;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (c==<span class="string">'/'</span>) d=b/a;</span><br><span class="line">    <span class="keyword">else</span> d=<span class="built_in">qmi</span>(b,a);</span><br><span class="line"></span><br><span class="line">    nums.<span class="built_in">push</span>(d);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">	string str;</span><br><span class="line">	cin&gt;&gt;str;</span><br><span class="line">	<span class="keyword">if</span>(str[<span class="number">0</span>]==<span class="string">'-'</span>)</span><br><span class="line">		str=<span class="string">'0'</span>+str;</span><br><span class="line">	string left;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;str.<span class="built_in">size</span>();i++)</span><br><span class="line">		left+=<span class="string">'('</span>;</span><br><span class="line">	str=left+str+<span class="string">')'</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;str.<span class="built_in">size</span>();i++){</span><br><span class="line">		<span class="keyword">if</span>(str[i]&gt;=<span class="string">'0'</span>&amp;&amp;str[i]&lt;=<span class="string">'9'</span>){</span><br><span class="line">			<span class="type">int</span> j=i,t=<span class="number">0</span>;</span><br><span class="line">			<span class="keyword">while</span>(str[j]&gt;=<span class="string">'0'</span>&amp;&amp;str[j]&lt;=<span class="string">'9'</span>){</span><br><span class="line">				t=t*<span class="number">10</span>+str[j]-<span class="string">'0'</span>;</span><br><span class="line">				j++;</span><br><span class="line">			}</span><br><span class="line">			i=j<span class="number">-1</span>;</span><br><span class="line">			nums.<span class="built_in">push</span>(t);</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">else</span>{</span><br><span class="line">			<span class="type">char</span> c=str[i];</span><br><span class="line">			<span class="keyword">if</span> (c==<span class="string">'('</span>) ops.<span class="built_in">push</span>(c);</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span>(c==<span class="string">'+'</span>||c==<span class="string">'-'</span>){</span><br><span class="line">				 <span class="keyword">if</span> (c ==<span class="string">'-'</span>&amp;&amp;i &amp;&amp;!(str[i - <span class="number">1</span>]&gt;=<span class="string">'0'</span>&amp;&amp;str[i - <span class="number">1</span>]&lt;=<span class="string">'9'</span>)&amp;&amp;str[i<span class="number">-1</span>]!=<span class="string">')'</span>){</span><br><span class="line">                    <span class="keyword">if</span> (str[i + <span class="number">1</span>]==<span class="string">'('</span>) {  <span class="comment">// 将-(...)变成-1 * (...)</span></span><br><span class="line">                        nums.<span class="built_in">push</span>(<span class="number">-1</span>);</span><br><span class="line">                        ops.<span class="built_in">push</span>(<span class="string">'*'</span>);</span><br><span class="line">                    }</span><br><span class="line">                    <span class="keyword">else</span>{</span><br><span class="line">                        <span class="type">int</span> j=i<span class="number">+1</span>,t=<span class="number">0</span>;</span><br><span class="line">                        <span class="keyword">while</span> (str[j]&gt;=<span class="string">'0'</span>&amp;&amp;str[j]&lt;<span class="string">'9'</span>){</span><br><span class="line">                            t=t*<span class="number">10</span>+str[j]-<span class="string">'0'</span>;</span><br><span class="line">                            j++ ;</span><br><span class="line">                        }</span><br><span class="line">                        nums.<span class="built_in">push</span>(-t);</span><br><span class="line">                        i=j<span class="number">-1</span>;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">else</span>{</span><br><span class="line">                    <span class="keyword">while</span>(ops.<span class="built_in">top</span>()!=<span class="string">'('</span>)</span><br><span class="line">                        <span class="built_in">cal</span>();</span><br><span class="line">                    ops.<span class="built_in">push</span>(c);</span><br><span class="line">                }</span><br><span class="line">			}</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (c==<span class="string">'*'</span>||c==<span class="string">'/'</span>){</span><br><span class="line">                <span class="keyword">while</span> (ops.<span class="built_in">top</span>()==<span class="string">'*'</span>||ops.<span class="built_in">top</span>()==<span class="string">'/'</span>||ops.<span class="built_in">top</span>()==<span class="string">'^'</span>) <span class="built_in">cal</span>();</span><br><span class="line">                ops.<span class="built_in">push</span>(c);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">'^'</span>){</span><br><span class="line">                <span class="keyword">while</span>(ops.<span class="built_in">top</span>()==<span class="string">'^'</span>)<span class="built_in">cal</span>();</span><br><span class="line">                ops.<span class="built_in">push</span>(c);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">')'</span>){</span><br><span class="line">                <span class="keyword">while</span>(ops.<span class="built_in">top</span>()!=<span class="string">'('</span>) <span class="built_in">cal</span>();</span><br><span class="line">                ops.<span class="built_in">pop</span>();</span><br><span class="line">            }</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">	cout&lt;&lt;nums.<span class="built_in">top</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="第三道"><a href="#第三道" class="headerlink" title="第三道"></a>第三道</h2><h3 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h3><p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/154/">152. 城市游戏 - AcWing题库</a></p>
<p>有一天，小猫 rainbow 和 freda 来到了湘西张家界的天门山玉蟾宫，玉蟾宫宫主蓝兔盛情地款待了它们，并赐予它们一片土地。</p>
<p>这片土地被分成 N×M 个格子，每个格子里写着 <code>R</code> 或者 <code>F</code>，<code>R</code> 代表这块土地被赐予了 rainbow，<code>F</code> 代表这块土地被赐予了 freda。</p>
<p>现在 freda 要在这里卖萌。。。它要找一块矩形土地，要求这片土地都标着 <code>F</code> 并且面积最大。</p>
<p>但是 rainbow 和 freda 的 OI 水平都弱爆了，找不出这块土地，而蓝兔也想看 freda 卖萌（她显然是不会编程的……），所以它们决定，如果你找到的土地面积为 S，它们将给你 3×S两银子。</p>
<h4 id="输入格式-1"><a href="#输入格式-1" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行包括两个整数 N,M，表示矩形土地有 N 行 M 列。</p>
<p>接下来 N 行，每行 M 个用空格隔开的字符 <code>F</code> 或 <code>R</code>，描述了矩形土地。</p>
<p>每行末尾没有多余空格。</p>
<h4 id="输出格式-1"><a href="#输出格式-1" class="headerlink" title="输出格式"></a>输出格式</h4><p>输出一个整数，表示你能得到多少银子，即(3×最大 <code>F</code> 矩形土地面积)的值。</p>
<h4 id="数据范围-1"><a href="#数据范围-1" class="headerlink" title="数据范围"></a>数据范围</h4><p>1≤N,M≤1000</p>
<h4 id="输入样例："><a href="#输入样例：" class="headerlink" title="输入样例："></a>输入样例：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">5 6</span><br><span class="line">R F F F F F</span><br><span class="line">F F F F F F</span><br><span class="line">R R R F F F</span><br><span class="line">F F F F F F</span><br><span class="line">F F F F F F</span><br></pre></td></tr></table></figure>

<h4 id="输出样例："><a href="#输出样例：" class="headerlink" title="输出样例："></a>输出样例：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">45</span><br></pre></td></tr></table></figure>

<h2 id="分析-2"><a href="#分析-2" class="headerlink" title="分析"></a>分析</h2><p>这题的做法与下面这题做法相似，只不过换成了字符串。只要用递推算出该点上面的连续矩形长，再遍历每一个点，时间复杂度为O(M*N)。</p>
<p><a target="_blank" rel="noopener" href="https://www.acwing.com/problem/content/133/">131. 直方图中最大的矩形 - AcWing题库</a></p>
<p>首先明确一点：一个矩形的延伸只会被比它矮的矩形卡住。</p>
<p><img src="https://img-blog.csdnimg.cn/2ce273cc56cb422a91b2e4c8bea6a1c7.png#pic_center" alt="在这里插入图片描述"></p>
<p>如上图，来看第 3 个矩形。以这个矩形为基础，向左延伸，然而 2 比它矮，所以不算入；向右延伸，4，5，6 比 3 高，可以截取与 3 等高部分算入面积。</p>
<p>所以接下来就很明确：要分别寻找矩形 i 左，右<strong>最近</strong>的比该矩形<strong>矮</strong>的矩形，存入l [ i ], r [ i ]。</p>
<h3 id="先来看代码"><a href="#先来看代码" class="headerlink" title="先来看代码"></a>先来看代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">	</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 1010</span></span><br><span class="line">	</span><br><span class="line"><span class="type">int</span> n,m,res;</span><br><span class="line"><span class="type">int</span> h[N][N];<span class="comment">//储存高度</span></span><br><span class="line"><span class="type">char</span> g[N][N];</span><br><span class="line"><span class="type">int</span> q[N],l[N],r[N];<span class="comment">//q为单调栈（存储的是下标），l为左边最近</span></span><br><span class="line">	</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">get</span><span class="params">(<span class="type">int</span> a[],<span class="type">int</span> l[])</span></span>{</span><br><span class="line">	<span class="type">int</span> tt=<span class="number">0</span>;<span class="comment">//tt为栈顶下标</span></span><br><span class="line">	a[<span class="number">0</span>]=<span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">		<span class="keyword">while</span>(a[q[tt]]&gt;=a[i]) tt--;</span><br><span class="line">		l[i]=q[tt]<span class="number">+1</span>;</span><br><span class="line">		q[++tt]=i;</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line">	</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">work</span><span class="params">(<span class="type">int</span> a[])</span></span>{</span><br><span class="line">	<span class="built_in">get</span>(a,l);</span><br><span class="line">	<span class="built_in">reverse</span>(a<span class="number">+1</span>,a<span class="number">+1</span>+m);</span><br><span class="line">	<span class="built_in">get</span>(a,r);</span><br><span class="line">	<span class="built_in">reverse</span>(a<span class="number">+1</span>,a<span class="number">+1</span>+m);</span><br><span class="line">	<span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">		<span class="type">int</span> left=l[i];</span><br><span class="line">		<span class="type">int</span> right=m<span class="number">+1</span>-r[m<span class="number">+1</span>-i];</span><br><span class="line">		res=<span class="built_in">max</span>(res,a[i]*(right-left<span class="number">+1</span>));</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line">	</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">	cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++){</span><br><span class="line">			<span class="type">char</span> c;</span><br><span class="line">			cin&gt;&gt;c;</span><br><span class="line">			g[i][j]=c;</span><br><span class="line">			<span class="keyword">if</span>( c==<span class="string">'F'</span>) h[i][j]=h[i<span class="number">-1</span>][j]<span class="number">+1</span>;</span><br><span class="line">			<span class="keyword">else</span> h[i][j]=<span class="number">0</span>;</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">		res=<span class="built_in">max</span>(res,<span class="built_in">work</span>(h[i]));</span><br><span class="line">	}</span><br><span class="line">	cout&lt;&lt;res*<span class="number">3</span>&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ul>
<li>reverse函数是将数组前后倒过来，为了方便一点求矩形 i 左，右<strong>最近</strong>的比该矩形<strong>矮</strong>的矩形。</li>
</ul>
<p>但是不方便的一点是：因为求 r 时倒过来了，所以下标也是倒过来的，那么right要转换一下。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/05/04/%E6%A0%88%E7%9A%84%E5%BA%94%E7%94%A8/" data-id="cm0hsydw8002jrkwa211l6r0c" data-title="栈的应用" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%88/" rel="tag">栈</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/python%E5%8A%9E%E5%85%AC/">python办公</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B9%A6%E8%AF%84/">书评</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E4%BB%96/">其他</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C/">网络</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E8%AE%AB%E6%BC%AB%E8%AE%B0/">自讫漫记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%AD%E6%B3%95/">语法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%A2%98%E9%9B%86/">题集</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/USACO07MAR/" rel="tag">USACO07MAR</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/codeforces/" rel="tag">codeforces</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dfs/" rel="tag">dfs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dp/" rel="tag">dp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/noip/" rel="tag">noip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E3%80%8A%E9%BB%91%E5%AE%A2%E4%B8%8E%E7%94%BB%E5%AE%B6%E3%80%8B/" rel="tag">《黑客与画家》</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B9%A6%E8%AF%84/" rel="tag">书评</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8C%E5%88%86%E5%9B%BE%E5%8C%B9%E9%85%8D/" rel="tag">二分图匹配</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/" rel="tag">优先队列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" rel="tag">博客搭建</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81/" rel="tag">哈夫曼编码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%9E%E5%BF%86/" rel="tag">回忆</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE%E8%AE%BA/" rel="tag">图论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%89%93%E5%8D%A1/" rel="tag">打卡</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%89%BE%E8%A7%84%E5%BE%8B/" rel="tag">找规律</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F/" rel="tag">排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%88/" rel="tag">栈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B8%B8%E8%AE%B0/" rel="tag">游记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8A%B6%E5%8E%8B/" rel="tag">状压</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A6%BB%E6%95%A3%E5%8C%96/" rel="tag">离散化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag">网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC/" rel="tag">自动化办公</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%B0%E5%BD%95/" rel="tag">记录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%AD%E6%B3%95/" rel="tag">语法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B4%AA%E5%BF%83/" rel="tag">贪心</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%93%BE%E8%A1%A8/" rel="tag">链表</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/USACO07MAR/" style="font-size: 10px;">USACO07MAR</a> <a href="/tags/codeforces/" style="font-size: 10px;">codeforces</a> <a href="/tags/dfs/" style="font-size: 10px;">dfs</a> <a href="/tags/dp/" style="font-size: 10px;">dp</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/noip/" style="font-size: 10px;">noip</a> <a href="/tags/%E3%80%8A%E9%BB%91%E5%AE%A2%E4%B8%8E%E7%94%BB%E5%AE%B6%E3%80%8B/" style="font-size: 10px;">《黑客与画家》</a> <a href="/tags/%E4%B9%A6%E8%AF%84/" style="font-size: 10px;">书评</a> <a href="/tags/%E4%BA%8C%E5%88%86%E5%9B%BE%E5%8C%B9%E9%85%8D/" style="font-size: 10px;">二分图匹配</a> <a href="/tags/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/" style="font-size: 10px;">优先队列</a> <a href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" style="font-size: 10px;">博客搭建</a> <a href="/tags/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81/" style="font-size: 10px;">哈夫曼编码</a> <a href="/tags/%E5%9B%9E%E5%BF%86/" style="font-size: 10px;">回忆</a> <a href="/tags/%E5%9B%BE%E8%AE%BA/" style="font-size: 10px;">图论</a> <a href="/tags/%E6%89%93%E5%8D%A1/" style="font-size: 10px;">打卡</a> <a href="/tags/%E6%89%BE%E8%A7%84%E5%BE%8B/" style="font-size: 10px;">找规律</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size: 10px;">排序</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 16.67px;">数据结构</a> <a href="/tags/%E6%A0%88/" style="font-size: 10px;">栈</a> <a href="/tags/%E6%B8%B8%E8%AE%B0/" style="font-size: 10px;">游记</a> <a href="/tags/%E7%8A%B6%E5%8E%8B/" style="font-size: 10px;">状压</a> <a href="/tags/%E7%A6%BB%E6%95%A3%E5%8C%96/" style="font-size: 10px;">离散化</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 20px;">算法</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 10px;">网络</a> <a href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%8A%9E%E5%85%AC/" style="font-size: 10px;">自动化办公</a> <a href="/tags/%E8%AE%B0%E5%BD%95/" style="font-size: 13.33px;">记录</a> <a href="/tags/%E8%AF%AD%E6%B3%95/" style="font-size: 10px;">语法</a> <a href="/tags/%E8%B4%AA%E5%BF%83/" style="font-size: 10px;">贪心</a> <a href="/tags/%E9%93%BE%E8%A1%A8/" style="font-size: 10px;">链表</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">August 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">August 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/08/31/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%95%B4%E7%90%86C/">排序算法整理C++</a>
          </li>
        
          <li>
            <a href="/2023/08/08/%E7%AE%80%E8%AF%84%E3%80%8A%E9%BB%91%E5%AE%A2%E4%B8%8E%E7%94%BB%E5%AE%B6%E3%80%8B/">简评《黑客与画家》</a>
          </li>
        
          <li>
            <a href="/2023/04/05/%E7%BD%91%E7%BB%9C%E7%BB%84%E6%88%90%E4%B8%8E%E6%9E%84%E5%BB%BA/">网络组成与构建</a>
          </li>
        
          <li>
            <a href="/2023/01/28/clock-levelup/">clock-levelup</a>
          </li>
        
          <li>
            <a href="/2023/01/25/%E5%AF%8C%E5%B1%B1%E6%84%9F%E9%81%872023/">富山感遇2023</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>